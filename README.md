# Космический Телеграм
Данный репозиторий представляет из себя набор python скриптов для скачивания фотографий космоса с различных ресурсов в локальную папку. А также для их публикации в телеграм канале с помощью телеграм бота.


## Как установить
Скачайте репозиторий и установите Python пакеты из `requirements.txt`:
```bash
git clone https://github.com/AlexRikka/devman_space_images_bot.git
cd devman_space_images_bot
pip install -r requirements.txt
```
Для взаимодействия с API сервисов необходимо получить их API токены. Создайте в папке с проектом файл `.env` и добавляйте переменные с токенами в него, вот так:
```
NASA_API_KEY=<ваш токен>
```
Какие переменные `.env` понадобятся:  
- NASA_API_KEY: токен NASA API необходимо получить на сайте [NASA API APOD](https://api.nasa.gov/#apod).
- TG_BOT_HTTP_KEY: токен телеграм бота.
- TG_CHANNEL_NAME: ссылка на канал в телеграме в формате @name.

## Основные скрипты

**fetch_spacex_images.py**  
Скачивает фото запуска ракет SpaceX с помощью [SpaceX API](https://github.com/r-spacex/SpaceX-API). При запуске скрипт принимает в качестве аргумента в командной строке id запуска. Если id не указать, то скачаются фото последнего запуска, если они есть. Пример запуска:
```
python fetch_spacex_images.py 5eb87ce4ffd86e000604b337 
```

**fetch_nasa_apod_images.py**  
Скачивает фото на космическую тематику с сайта [NASA API APOD](https://api.nasa.gov/#apod). Чтобы воспользоваться NASA API необходимо получить токен NASA_API_KEY. Пример запуска:
```
python fetch_nasa_apod_images.py
```
**fetch_nasa_epic_images.py**  
Скачивает фото планеты Земля с сайта [NASA API EPIC](https://api.nasa.gov/#epic). Чтобы воспользоваться скриптом необходима та же настройка с токеном, что и в скрипте выше. Пример запуска:
```
python fetch_nasa_epic_images.py
```
**publish_images.py**  
Публикует в телеграм канале фотографии, скачанные с помощью скриптов выше. При запуске скрипт принимает в качестве аргумента в командной строке периодичность публикации фото в часах. Если ничего не указать, то бот будет публиковать 1 фото раз в 4 часа. Фото размером более 20МБ публиковаться не будут.  
Для использования необходимо создать телеграм бота, получить его токен TG_BOT_HTTP_KEY. Далее создать канал, где будут публиковаться фотографии, и добавить туда бота в качестве админа. Ссылку на канал в формате @name добавить в переменную TG_CHANNEL_NAME. Пример запуска:

```
python publish_images.py 2
```

**publish_one_image.py**  
Публикует в телеграм канале указанную фотографию. При запуске скрипт принимает в качестве аргумента в командной строке путь к фотографии. Пример запуска:
```
python publish_one_image.py images\spacex_1.jpg
```

## Цель проекта
Код написан в образовательных целях на онлайн-курсе для веб-разработчиков dvmn.org.